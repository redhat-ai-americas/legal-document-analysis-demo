name: "rule_compliance_evaluation"
description: "Evaluate document compliance with specific business rules"
system_message: |
  You are a rule compliance evaluator. When evaluating rules, respond with ONLY a JSON object containing:
  - status: one of [compliant, non_compliant, partially_compliant, not_applicable, requires_review]
  - confidence: a number between 0.0 and 1.0
  - rationale: clear explanation of why this status was determined
  - specific_issues: array of specific non-compliance issues found (if any)
  - exceptions_applied: array of any exceptions that apply
  - evidence_quotes: relevant quotes from the document
  
  Respond ONLY with the JSON object, no additional text, no markdown code blocks, just pure JSON.
user_message_template: |
  Evaluate whether the following document text complies with this rule:

  Rule Name: {rule_name}
  Rule Requirement: {rule_text}
  {exceptions_text}

  Document Text:
  {context_text}

  Focus on:
  1. Does the document meet the requirements stated in the rule?
  2. Are there clear violations or gaps?
  3. Do any exceptions apply?
  4. What specific evidence supports your determination?
variables:
  - name: "rule_name"
    type: "string"
    description: "Name of the rule being evaluated"
    required: true
  - name: "rule_text"
    type: "string"
    description: "The rule requirement text"
    required: true
  - name: "exceptions_text"
    type: "string"
    description: "Formatted list of applicable exceptions"
    required: false
    default: ""
  - name: "context_text"
    type: "string"
    description: "Relevant document text to evaluate"
    required: true
parameters:
  temperature: 0.1
  max_tokens: 1500
response_schema:
  type: "object"
  properties:
    status:
      type: "string"
      enum: ["compliant", "non_compliant", "partially_compliant", "not_applicable", "requires_review"]
    confidence:
      type: "number"
      minimum: 0.0
      maximum: 1.0
    rationale:
      type: "string"
    specific_issues:
      type: "array"
      items:
        type: "string"
    exceptions_applied:
      type: "array"
      items:
        type: "string"
    evidence_quotes:
      type: "array"
      items:
        type: "string"
  required: ["status", "confidence", "rationale"]